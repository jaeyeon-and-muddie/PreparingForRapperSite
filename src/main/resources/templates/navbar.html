<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<nav th:fragment = "navbarFragment">
    <a th:href = "@{/album}">메인으로 </a>
    <a th:href = "@{/user/login}" sec:authorize = "isAnonymous()">로그인 </a>
    <a th:href = "@{/user/logout}" sec:authorize = "isAuthenticated()">로그아웃 </a>
    <a th:href = "@{/user/signup}">회원가입 </a>
    <a th:href = "@{/user/point}" sec:authorize = "isAuthenticated()">포인트 결제 </a>
    <a th:href = "@{/user/point/receipt}" sec:authorize = "isAuthenticated()">포인트 결제 내역 </a>
    <a th:href = "@{/album/write}" sec:authorize = "isAuthenticated()">앨범추가 </a>
    <a th:href = "@{/judge}">심사중인 믹스테이프 보러가기 </a>
    <a th:href = "@{/mixtape}">믹스테이프 보러가기 </a>
    <a th:href = "@{/mixtape/write}" sec:authorize = "isAuthenticated()">믹스테이프 추가 </a>
    <a th:href = "@{/user/alarm}" sec:authorize = "isAuthenticated()">알람함 </a>
    <a th:href = "@{/album/rate}">레이팅 페이지 가기 </a>
    <a th:href = "@{/user/point/sale}" sec:authorize = "isAuthenticated()">내가 판매한 목록 보기 </a>
    <a th:href = "@{/user/point/basket}" sec:authorize = "isAuthenticated()">장바구니 </a>
    <a th:href = "@{/product/write}" sec:authorize = "isAuthenticated()">굿즈 등록하기 </a>
    <a th:href = "@{/product}">굿즈 보러가기 </a>
    <span sec:authorize = "isAuthenticated()" style = "float: right">
        <span th:text = "${'포인트 : ' + user.point}"></span>
        <span th:text = "${'유저 이름 : ' + user.username}"></span>
        <span th:text = "${'유저 구분 : ' + user.role}"></span>
    </span>
    <div sec:authorize = "isAuthenticated()">
        최근 방문 목록
    </div>
    <span sec:authorize = "isAuthenticated()" th:each = 'visit, i : ${user.visited}'>
        <a th:href = "@{'/' + ${visit.url}}" th:text = "${visit.title}"></a>
        <span th:if = "${i.count != user.visited.size()}">/</span>
    </span>
</nav>